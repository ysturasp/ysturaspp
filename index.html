<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Узнайте статистику оценок студентов ЯГТУ, средние баллы и распределение оценок по различным дисциплинам. ysturasp">
    <title>Оценки студентов ЯГТУ</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #1b1b1b;
            color: #f0f2f5;
        }
        #vanta-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }
        #dark-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1;
        }
        .container {
            margin-top: 50px;
            z-index: 1;
            position: relative;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(35, 35, 35, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        .loading-indicator {
            width: 320px;
            height: 320px;
            background: url('https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_6631fab38bcdab100e7c214e_6634a992a228f13b4de1505c/orig') no-repeat center center;
            background-size: cover;
            border-radius: 50%;
        }
        .loading-text {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 5px;
            color: #fff;
            font-size: 1.2em;
        }
            .text-primary {
                color: #bc7eef !important;
            }
        .btn-primary {
            color: #fff;
            background-color: #8B00FF !important;
            border-color: #8c00ff78 !important;
            box-shadow: 0 0 0 .2rem rgba(59, 13, 103, 0.5) !important;
        }
        .icon-square {
            width: 70px;
            height: 70px;
            margin-right: 0 auto;
            vertical-align: middle;
        }

    </style>
</head>
<body>
    <div id="vanta-background"></div>
    <div id="dark-overlay"></div>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-indicator"></div>
        <div class="loading-text">Загрузка, ожидайте...</div>
    </div>
    <div class="container">
        <h1 class="text-center text-primary my-4">ysturasp</h1>
        <div class="intro">
            <p>Добро пожаловать на сайт «Статистика оценок ЯГТУ»!</p>
            <p>Этот сайт создан для студентов (пока что только ИЦС) Ярославского государственного технического университета (ЯГТУ), чтобы помочь вам узнать, насколько сложны различные дисциплины, основываясь на среднем балле студентов, которые уже прошли эти курсы.</p>
            
            <p><a href="/student" class="btn btn-primary">Перейти на страницу анонимного чата</a></p>
            <p>PS на самом деле это все выдумка, любые совпадения случайны</p>
        </div>
        <div class="form-group">
            <label for="discipline">Выберите дисциплину:</label>
            <select id="discipline" class="form-control">
            </select>
            <button class="btn btn-primary btn-block mt-3" onclick="getStatistics()">Получить статистику</button>
        </div>
        <div class="result mt-4" id="statisticsResult">
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const disciplines = [
                 "CRM-системы",
                 "Web - технологии",
                 "Администрирование информационных систем (англ.)",
                 "Администрирование информационных систем (рус)",
                 "Администрирование информационных систем",
                 "Алгоритмизация и программирование Курсач",
                 "Алгоритмизация и программирование Экз",
                 "Алгоритмы и структуры данных",
                 "Анализ данных и процессов",
                 "Архитектура ЭВМ",
                 "Архитектура информационных систем",
                 "Базы данных",
                 "Безопасность жизнедеятельности",
                 "Бизнес-планирование и инвестиционное проектирование",
                 "Большие данные",
                 "Введение в программную инженерию",
                 "Введение в современные информационные технологии",
                 "Введение в специальность",
                 "Введение в теорию информации",
                 "Вычислительные методы в компьютерном инжиниринге",
                 "Геоинформационные системы",
                 "Гидро- и пневмоприводы",
                 "Деловой иностранный язык",
                 "Диагностика в технических системах",
                 "Дискретная и интервальная математика",
                 "Дискретная математика",
                 "Дискретная математика и математическая логика",
                 "Документирование программного обеспечения",
                 "Защита интеллектуальной собственности",
                 "Защита объектов интеллектуальной собственности",
                 "Инвестиционный менеджмент",
                 "Инженерная и компьютерная графика",
                 "Инженерная и компьютерная графика",
                 "Иностранный язык",
                 "Иностранный язык (специализация)",
                 "Иностранный язык",
                 "Иностранный язык делового и профессионального общения",
                 "Инструментальные средства информационных систем",
                 "Инструменты моделирования бизнес-процессов",
                 "Интегрированные производственные системы и комплексы",
                 "Интегрированные телекоммуникационные системы",
                 "Интеллектуальные информационные системы и технологии",
                 "Интеллектуальные системы диагностики технического состояния объектов",
                 "Интеллектуальные системы и технологии",
                 "Интернет-маркетинг",
                 "Инфокоммуникационные системы и сети",
                 "Информатика",
                 "Информатика",
                 "Информационная безопасность и защита информации",
                 "Информационная безопасность интегрированных информационных систем",
                 "Информационные системы управления производством",
                 "Информационные технологии",
                 "Информационные технологии в научно-исследовательской и практической деятельности",
                 "Информационные технологии в управлении производственными процессами",
                 "Информационные технологии и программные комплексы",
                 "Информационные технологии и программные комплексы",
                 "Информационные технологии управления предприятием",
                 "Искусственный интеллект и машинное обучение",
                 "Исследование операций",
                 "История (история России, всеобщая история)",
                 "История",
                 "История развития отрасли",
                 "Компьютерная графика",
                 "Компьютерное моделирование в экономике",
                 "Компьютерные сети",
                 "Корпоративные информационные системы управления предприятием",
                 "Криптографические методы защиты информации",
                 "Культурология и этика общения",
                 "Линейная алгебра",
                 "Линейные непрерывные системы управления",
                 "Логистика",
                 "Маркетинг",
                 "Матеpиаловедение",
                 "Математика",
                 "Математика (доп.главы)",
                 "Математика",
                 "Математические основы интеллектуальных систем",
                 "Математический анализ",
                 "Материаловедение и технология конструкционных материалов",
                 "Машинно-зависимые языки программирования",
                 "Машинное обучение",
                 "Машинное обучение и искусственный интеллект",
                 "Машинное обучение и искусственный интеллект",
                 "Менеджмент ИТ проектов",
                 "Менеджмент информационных технологий",
                 "Методология проектирования сложных систем управления",
                 "Методы и модели анализа данных",
                 "Методы и средства проектирования информационных систем и технологий",
                 "Методы исследования и моделирования информационных процессов и технологий",
                 "Метрология",
                 "Метрология и измерительная техника",
                 "Микропроцессорные устройства в робототехнике",
                 "Микроэкономика",
                 "Моделирование объектов и систем управления",
                 "Моделирование объектов и систем управления",
                 "Моделирование производственных процессов. Моделирование основных производственных процессов",
                 "Моделирование систем",
                 "Надежность программного обеспечения",
                 "Научная публицистика",
                 "Научно-исследовательская работа",
                 "Научно-исследовательская работа",
                 "Начертательная геометрия",
                 "Начертательная геометрия, инженерная и компьютерная графика",
                 "Начертательная геометрия, инженерная и компьютерная графика",
                 "Нелинейные и цифровые системы управления",
                 "Обработка изображений и компьютерное зрение",
                 "Общая и неоpганическая химия",
                 "Объектно-ориентированное программирование",
                 "Ознакомительная практика",
                 "Операционные системы",
                 "Оптимальное управление",
                 "Организационно-правовое обеспечение информационной безопасности",
                 "Организация производства в ИТ отрасли",
                 "Основы Web безопасности",
                 "Основы инженерного проектирования",
                 "Основы менеджмента",
                 "Основы построения защищенных баз данных",
                 "Основы построения защищенных компьютерных сетей",
                 "Основы программирования",
                 "Основы программирования на Python",
                 "Основы проектирования интерфейсов",
                 "Основы современного естествознания",
                 "Основы теории принятия решений",
                 "Основы цифровой техники",
                 "Поддержка и предоставление IT- сервисов",
                 "Правоведение",
                 "Практика производственная (научно-исследовательская работа)",
                 "Практика производственная (научно-исследовательская работа)",
                 "Практика производственная (практика по получению профессиональных умений и опыта профессиональной деятельности)",
                 "Практика производственная (практика по получению профессиональных умений и опыта профессиональной деятельности: технологическая практика)",
                 "Практика производственная (проектно-технологическая)",
                 "Практика производственная преддипломная",
                 "Практика производственная технологическая (пректно-технологическая)",
                 "Практика производственная технологическая (проектно-технологическая)",
                 "Практика учебная (ознакомительная)",
                 "Практика учебная (педагогическая)",
                 "Практика учебная (практика по получению первичных профессиональных умений и навыков)",
                 "Практика учебная (практика по получению первичных профессиональных умений и навыков, в т.ч. первичных умений и навыков научно-исследовательской деятельности)",
                 "Практика учебная (технологическая)",
                 "Практика учебная",
                 "Предиктивная аналитика",
                 "Представление знаний и экспертные системы",
                 "Прикладная механика",
                 "Прикладная физическая культура (элективные дисциплины)",
                 "Прикладные решения 1С",
                 "Программирование",
                 "Программирование для мобильных платформ",
                 "Программирование и основы алгоритмизации",
                 "Программирование промышленных контроллеров",
                 "Программная реализация систем искусственного интеллекта",
                 "Программно-аппаратные средства защиты информации",
                 "Проектирование распределенных систем хранения и обработки информации",
                 "Проектная деятельность",
                 "Проектное обучение технологическому предпринимательству",
                 "Проектный практикум",
                 "Проектный практикум",
                 "Производственная практика",
                 "Системная инженерия",
                 "Системы интеллектуальной обработки \"больших\" данных",
                 "Системы менеджмента информационной безопасности",
                 "Системы поддержки принятия решений",
                 "Системы управления базами данных",
                 "Современные информационные технологии",
                 "Современные телекоммуникационные системы",
                 "Современные технологии разработки мобильных приложений",
                 "Специальные главы математики",
                 "Средства анализа безопасности программного обеспечения",
                 "Статистические методы анализа данных",
                 "Сценарные языки программирования",
                 "Телекоммуникационные системы",
                 "Теоpетическая механика",
                 "Теоретические и экспериментальные методы научных исследований",
                 "Теория вероятностей и математическая статистика",
                 "Теория вероятностей и математическая статистика",
                 "Теория вероятности",
                 "Теория информационных процессов и систем",
                 "Теория систем и системный анализ",
                 "Тестирование и отладка программного обеспечения",
                 "Тестирование программного обеспечения",
                 "Технико-экономическое обоснование и управление проектами",
                 "Техническая механика",
                 "Техническая механика",
                 "Технические измерения и приборы",
                 "Технологии интернета вещей",
                 "Технологии обработки информации",
                 "Технологии программирования",
                 "Технологии программирования",
                 "Технологии разработки программного обеспечения",
                 "Технологические процессы и оборудование",
                 "Типовые автоматические системы регулирования",
                 "Типовые системы управления в робототехнике",
                 "Управление ИТ проектами",
                 "Управление данными",
                 "Управление качеством",
                 "Управление качеством разработки программного обеспечения",
                 "Управление организацией в цифровой экономике",
                 "Управление проектами разработки программного обеспечения",
                 "Управление производственными процессами",
                 "Учебная практика",
                 "Физика",
                 "Физика. Основы квантовой физики",
                 "Физическая культура и спорт",
                 "Философия",
                 "Философские проблемы науки и техники",
                 "Химия",
                 "Цифровая культура",
                 "Цифровая экономика и сквозные технологии",
                 "Экономика",
                 "Экономика IT-отрасли",
                 "Экономика ИТ-отрасли",
                 "Экономика и организация производства",
                 "Экспертные системы",
                 "Электромагнитные поля и волны в современных телекоммуникациях",
                 "Электроника и схемотехника",
                 "Электронная коммерция",
                 "Электротехника",
                 "Электротехника и электроника"
            ];
            populateDisciplines(disciplines);
        });

        function populateDisciplines(data) {
            const disciplineSelect = document.getElementById('discipline');
            data.forEach(discipline => {
                const option = document.createElement('option');
                option.textContent = discipline;
                option.value = discipline;
                disciplineSelect.appendChild(option);
            });
        }

        async function getStatistics() {
            const disciplineSelect = document.getElementById('discipline');
            const discipline = disciplineSelect.value;
            const cachedData = localStorage.getItem(discipline);
            
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';

            if (cachedData) {
                displayStatistics(JSON.parse(cachedData));
                loadingOverlay.style.display = 'none';
            } else {
                const url = `https://script.google.com/macros/s/AKfycbxKTxXDptI0cEPiE09YTFdIKzt9Y5ucCwZu_9lL1TLraBTEh3WPDSO5NoTE-_mXdJu5/exec?discipline=${encodeURIComponent(discipline)}`;

                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    localStorage.setItem(discipline, JSON.stringify(data));
                    displayStatistics(data);
                } catch (error) {
                    console.error('Ошибка при получении данных:', error);
                    displayError('Ошибка при получении данных');
                } finally {
                    loadingOverlay.style.display = 'none';
                }
            }
        }

        function displayStatistics(data) {
            const disciplineSelect = document.getElementById('discipline');
            const discipline = disciplineSelect.value;
            const resultDiv = document.getElementById('statisticsResult');

            if (data.error) {
                resultDiv.innerHTML = `<p>${data.error}</p>`;
                return;
            }

            const { average, count5, count4, count3, count2 } = data;

            const icons = {
                count5: 'https://cdn-icons-png.flaticon.com/512/6431/6431061.png',
                count4: 'https://cdn-icons-png.flaticon.com/512/6431/6431202.png',
                count3: 'https://cdn-icons-png.flaticon.com/512/6431/6431195.png',
                count2: 'https://cdn-icons-png.flaticon.com/512/6431/6431189.png'
            };

            const statisticsHTML = `
                <div class="card-deck">
                    <div class="col text-center mb-4">
                        <h3>Статистика по предмету "${discipline}"</h3>
                    </div>
                </div>
                <div class="card-deck">
                    <div class="card text-white bg-info mb-3">
                        <div class="card-body text-center">
                            <img src="https://cdn-icons-png.flaticon.com/512/5184/5184373.png" class="icon-square mb-2">
                            <p class="card-text">Средний балл: ${average}</p>
                        </div>
                    </div>
                    <div class="card text-white bg-secondary mb-3">
                        <div class="card-body text-center">
                            <img src="https://cdn-icons-png.flaticon.com/512/15873/15873462.png" class="icon-square mb-2">
                            <p class="card-text">Всего оценок проанализировано: ${count5 + count4 + count3 + count2}</p>
                        </div>
                    </div>
                </div>
                <div class="card-deck">
                    <div class="card text-white bg-success mb-3">
                        <div class="card-body text-center">
                            <img src="${icons.count5}" class="icon-square mb-2">
                            <p class="card-text">Пятерок: ${count5}</p>
                        </div>
                    </div>
                    <div class="card text-white bg-primary mb-3">
                        <div class="card-body text-center">
                            <img src="${icons.count4}" class="icon-square mb-2">
                            <p class="card-text">Четверок: ${count4}</p>
                        </div>
                    </div>
                    <div class="card text-white bg-warning mb-3">
                        <div class="card-body text-center">
                            <img src="${icons.count3}" class="icon-square mb-2">
                            <p class="card-text">Троек: ${count3}</p>
                        </div>
                    </div>
                    <div class="card text-white bg-danger mb-3">
                        <div class="card-body text-center">
                            <img src="${icons.count2}" class="icon-square mb-2">
                            <p class="card-text">Двоек: ${count2}</p>
                        </div>
                    </div>
                </div>
            `;

            resultDiv.innerHTML = statisticsHTML;
        }

        function displayError(message) {
            const resultDiv = document.getElementById('statisticsResult');
            resultDiv.innerHTML = `<p>${message}</p>`;
        }
    </script>
    
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(97705826, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
    });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/97705826" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0K2G90RDS0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-0K2G90RDS0');
    </script>
    <!-- Google tag (gtag.js) -->
    
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.birds.min.js"></script>
    <script>
    VANTA.BIRDS({
      el: "#vanta-background",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00
    })
    </script>
</body>
</html>
